<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Apri FilmWrap</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    // Prendi i parametri dalla query string
    const params = new URLSearchParams(window.location.search);
    const token = params.get('token_hash');
    const type = params.get('type');

    if (token && type) {
      // Redirect immediato all'app con deep link
      window.location.href = `filmwrap://auth/confirm?token_hash=${token}&type=${type}`;

      // Fallback: mostra link se il redirect automatico non funziona
      setTimeout(() => {
        document.body.innerHTML = `
          <h2>Apri l'app FilmWrap</h2>
          <p>Se l'app non si apre automaticamente, clicca qui:</p>
          <p><a href="filmwrap://auth/confirm?token_hash=${token}&type=${type}">Apri App</a></p>
        `;
      }, 1000);
    } else {
      document.body.innerHTML = `
        <h2>Link non valido</h2>
        <p>Controlla di aver cliccato il link corretto nell'email.</p>
      `;
    }
  </script>
</head>
<body>
  <h2>Caricamento...</h2>
  <p>Se non succede nulla, attendi qualche secondo.</p>
</body>
</html>
